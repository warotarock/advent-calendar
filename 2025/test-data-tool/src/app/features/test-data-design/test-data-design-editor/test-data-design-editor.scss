.test-data-design-editor {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  padding-top: 1rem;

  .toolbar {
    display: flex;
    gap: 8px;
    margin-bottom: 8px;

    button {
      padding: 0.1em 0.5em;

      &.delete-button {
        margin-left: 2em;
      }
    }
  }

  .editor-content {
    flex: 1;
    padding: 1rem;
    overflow-y: scroll;
    overflow-x: scroll;

    h3 {
      margin: 0 0 0.5rem 0;
      color: #333;
      font-size: 1.25rem;
    }

    .design-note {
      margin: 0 0 1rem 0;
      color: #666;
      font-style: italic;
    }
  }

  .test-data-display {
    .empty-state {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 200px;
      border: 2px dashed #ddd;
      border-radius: 0.25rem;
      background-color: #f8f9fa;

      p {
        margin: 0;
        color: #6c757d;
        font-style: italic;
      }
    }

    .trees-container {
      width: fit-content;

      .tree-item {
        margin-bottom: 0.25rem;
        border: 1px solid #e0e0e0;
        border-radius: 0.25rem;
        background-color: white;
        cursor: pointer;
        transition: all 0.2s ease;
        width: fit-content;
        min-width: 20rem;
        margin-bottom: 1em;

        // アクティブ状態（ツリーの系統にフォーカスがある）
        &.active {
          background-color: #f8f9fa;
          border-color: #dee2e6;
        }

        // フォーカス状態（このツリーに直接フォーカスがある）
        &.focused {
          .tree-header {
            background-color: #e3f2fd;
          }
        }

        &:hover:not(.focused) {
          background-color: #f5f5f5;
          border-color: #d0d0d0;
        }

        .tree-header {
          display: flex;
          align-items: center;
          gap: 0.1rem;
          padding: 0.25rem;
          background-color: transparent;
          border-bottom: 1px solid #e0e0e0;
          transition: background-color 0.2s ease;
          cursor: pointer;

          .tree-name {
            font-weight: 500;
            color: #333;
            margin-left: 0.5rem;
            margin-right: 0.5rem;
            cursor: inherit;
            flex: 1;
          }

          .tree-note {
            color: #666;
            font-size: 0.875rem;
          }
        }

        .no-nodes {
          padding: 0.25rem;
          color: #6c757d;
          font-style: italic;
        }

        .nodes-container {

          .placeholder {
            color: #6c757d;
            font-style: italic;
          }

          .node-item {
            border-radius: 0.125rem;
            background-color: #fafafa;
            cursor: pointer;
            transition: all 0.2s ease;

            &:not(:first-child) {
              border-top: 1px solid #e0e0e0;
            }

            .node-header {
              display: flex;
              align-items: center;
              gap: 0.1rem;
              padding: 0.25rem;
              border-bottom: 1px solid #e0e0e0;
              background-color: transparent;
              transition: all 0.2s ease;
              cursor: pointer;

              .node-indent {
                width: 0rem;
              }

              .node-name {
                font-weight: 400;
                color: #555;
                margin-left: 0.25rem;
                cursor: inherit; // ヘッダーのカーソルを継承
                flex: 1; // 残りスペースを埋める
              }

              .node-note {
                color: #888;
                font-size: 0.75rem;
              }

              &:hover {
                background-color: #f5f5f5;
                border-color: #d0d0d0;
              }
            }

            // フォーカス状態（このノードに直接フォーカスがある）- ヘッダーのみ色変更
            &.focused .node-header {
              background-color: #e3f2fd;

              .node-name {
                color: #1565c0;
                font-weight: 500;
              }
            }

            .no-records {
              padding: 0.125rem 0.125rem;
              color: #999;
              font-style: italic;
              font-size: 0.75rem;
            }

            .records-container {
              padding: 0.125rem 0.125rem;

              .placeholder {
                color: #999;
                font-style: italic;
                font-size: 0.75rem;
              }
            }

            .child-nodes {
              padding: 0.125rem 0.25rem;

              .placeholder {
                color: #999;
                font-style: italic;
                font-size: 0.75rem;
              }
            }
          }
        }
      }
    }

    // レコード表示スタイル
    .no-records {
      color: #6c757d;
      padding: 0.5rem;
      margin: 0.25rem 0;
    }

    .records-container {

      .records-grid {
        border-collapse: collapse;
        table-layout: fixed;

        th,
        td {
          border: 1px solid #ccc;
          padding: 4px;
          position: relative;
          font-family: monospace;

          &.selected-cell {
            &::after {
              content: '';
              position: absolute;
              top: -1px;
              left: -1px;
              right: -1px;
              bottom: -1px;
              border: 2px solid #007bff;
              pointer-events: none;
              z-index: 1;
            }
          }
        }

        thead {
          background-color: #f2f2f2;

          .checkbox-header {
            text-align: center;
          }
        }

        tbody {
          tr {
            cursor: pointer;
            font-family: monospace;

            &.selected {
              background-color: #d8eafc;
              &:hover {
                background-color: #c0d9f0;
              }
            }

            &.focused {
              background-color: #e3f2fd;
            }

            &:not(.selected):hover {
              background-color: #f0f0f0;
            }
          }

          .checkbox-cell {
          }

          .field-cell {
            font-family: monospace;

            &:hover {
              background-color: rgba(0, 123, 255, 0.1);
            }
          }
        }
      }
    }
  }
}
